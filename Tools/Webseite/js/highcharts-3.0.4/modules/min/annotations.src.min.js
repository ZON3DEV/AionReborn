!function(t,e){function i(t){var e,i;return i={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},e={circle:{params:{x:0,y:0}}},e[t]&&(i.shape=f(i.shape,e[t])),i}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"number"==typeof t}function s(t){return t!==r&&null!==t}function a(t,e,i,n,o){for(var s=t.length,a=0;s>a;)"number"==typeof t[a]&&"number"==typeof t[a+1]?(t[a]=e.toPixels(t[a])-n,t[a+1]=i.toPixels(t[a+1])-o,a+=2):a+=1;return t}var r,l,h,p=t.Chart,c=t.extend,d=t.each;h=["path","rect","circle"],l={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var u=e.inArray,f=t.merge,g=function(){this.init.apply(this,arguments)};g.prototype={init:function(t,e){var n=e.shape&&e.shape.type;this.chart=t,this.options=f({},i(n),e)},render:function(t){var e=this,i=this.chart,n=e.chart.renderer,o=e.group,s=e.title,a=e.shape,r=e.options,l=r.title,p=r.shape;o||(o=e.group=n.g()),!a&&p&&-1!==u(p.type,h)&&(a=e.shape=n[r.shape.type](p.params),a.add(o)),!s&&l&&(s=e.title=n.label(l),s.add(o)),o.add(i.annotations.group),e.linkObjects(),t!==!1&&e.redraw()},redraw:function(){var e,i,n,r,h,p,d,f=this.options,g=this.chart,m=this.group,y=this.title,b=this.shape,v=this.linkedObject,w=g.xAxis[f.xAxis],x=g.yAxis[f.yAxis],A=f.width,P=f.height,L=l[f.anchorY],T=l[f.anchorX],k=!1;if(v&&(i=v instanceof t.Point?"point":v instanceof t.Series?"series":null,"point"===i?(f.xValue=v.x,f.yValue=v.y,n=v.series):"series"===i&&(n=v),m.visibility!==n.group.visibility&&m.attr({visibility:n.group.visibility})),p=s(f.xValue)?w.toPixels(f.xValue+w.minPointOffset)-w.minPixelPadding:f.x,d=s(f.yValue)?x.toPixels(f.yValue):f.y,!isNaN(p)&&!isNaN(d)&&o(p)&&o(d)){if(y&&(y.attr(f.title),y.css(f.title.style),k=!0),b){if(e=c({},f.shape.params),"values"===f.units){for(r in e)u(r,["width","x"])>-1?e[r]=w.translate(e[r]):u(r,["height","y"])>-1&&(e[r]=x.translate(e[r]));e.width&&(e.width-=w.toPixels(0)-w.left),e.x&&(e.x+=w.minPixelPadding),"path"===f.shape.type&&a(e.d,w,x,p,d)}"circle"===f.shape.type&&(e.x+=e.r,e.y+=e.r),k=!0,b.attr(e)}m.bBox=null,o(A)||(h=m.getBBox(),A=h.width),o(P)||(h||(h=m.getBBox()),P=h.height),o(T)||(T=l.center),o(L)||(L=l.center),p-=A*T,d-=P*L,g.animation&&s(m.translateX)&&s(m.translateY)?m.animate({translateX:p,translateY:d}):m.translate(p,d)}},destroy:function(){var t=this,e=this.chart,i=e.annotations.allItems,n=i.indexOf(t);n>-1&&i.splice(n,1),d(["title","shape","group"],function(e){t[e]&&(t[e].destroy(),t[e]=null)}),t.group=t.title=t.shape=t.chart=t.options=null},update:function(t,e){c(this.options,t),this.linkObjects(),this.render(e)},linkObjects:function(){var t=this,e=t.chart,i=t.linkedObject,n=i&&(i.id||i.options.id),o=t.options,a=o.linkedTo;s(a)?s(i)&&a===n||(t.linkedObject=e.get(a)):t.linkedObject=null}},c(p.prototype,{annotations:{add:function(t,e){var i,o,s=this.allItems,a=this.chart;for(n(t)||(t=[t]),o=t.length;o--;)i=new g(a,t[o]),s.push(i),i.render(e)},redraw:function(){d(this.allItems,function(t){t.redraw()})}}}),p.prototype.callbacks.push(function(e){var i,o=e.options.annotations;i=e.renderer.g("annotations"),i.attr({zIndex:7}),i.add(),e.annotations.allItems=[],e.annotations.chart=e,e.annotations.group=i,n(o)&&o.length>0&&e.annotations.add(e.options.annotations),t.addEvent(e,"redraw",function(){e.annotations.redraw()})})}(Highcharts,HighchartsAdapter);