!function(t){var e=t.Axis,n=t.each,s=t.extend,o=t.merge,r=t.pick,a=t.numberFormat,l=t.getOptions().plotOptions,h=t.Color,c=function(){};t.pathToArray=function(t){var e,t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/);for(e=0;e<t.length;e++)/[a-zA-Z]/.test(t[e])||(t[e]=parseFloat(t[e]));return t},t.wrap(e.prototype,"init",function(t,i,o){return"map"===i.options.chart.type&&s(this,{getSeriesExtremes:function(){var t=this.isXAxis,e=Number.MAX_VALUE,i=Number.MIN_VALUE;n(this.series,function(n){e=Math.min(e,n[t?"minX":"minY"]),i=Math.max(i,n[t?"maxX":"maxY"])}),this.dataMin=e,this.dataMax=i},setAxisTranslation:function(){var t,i=this.chart,n=i.plotWidth/i.plotHeight;t=this.isXAxis,i=i.xAxis[0],e.prototype.setAxisTranslation.call(this),t||void 0===i.transA||(this.transA=i.transA=Math.min(this.transA,i.transA),t=(i.max-i.min)/(this.max-this.min),t=t>n?this:i,n=(t.max-t.min)*t.transA,t.minPixelPadding=(t.len-n)/2)}}),t.call(this,i,o)}),l.map=o(l.scatter,{animation:!1,minOpacity:.2,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,tooltip:{followPointer:!0,headerFormat:'<span style="font-size:10px">{point.key}</span><br/>',pointFormat:"{series.name}: {point.y}<br/>"}}),t.seriesTypes.map=t.extendClass(t.seriesTypes.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",trackerGroups:["group","markerGroup"],getSymbol:c,getExtremesFromAll:!0,init:function(e){var i,s,o,r,l,h,c,d=this,p=e.options.legend.valueDecimals,u=[];c="horizontal"===e.options.legend.layout,t.Series.prototype.init.apply(this,arguments),l=d.options.colorRange,d.options.valueRanges?(n(d.options.valueRanges,function(e){s=e.from,o=e.to,i="",void 0===s?i="< ":void 0===o&&(i="> "),void 0!==s&&(i+=a(s,p)),void 0!==s&&void 0!==o&&(i+=" - "),void 0!==o&&(i+=a(o,p)),u.push(t.extend({chart:d.chart,name:i,options:{},drawLegendSymbol:t.seriesTypes.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},e))}),d.legendItems=u):l&&(s=l.from,o=l.to,r=l.fromLabel,l=l.toLabel,h=c?[0,0,1,0]:[0,1,0,0],c||(c=r,r=l,l=c),h={linearGradient:{x1:h[0],y1:h[1],x2:h[2],y2:h[3]},stops:[[0,s],[1,o]]},u=[{chart:d.chart,options:{},fromLabel:r,toLabel:l,color:h,drawLegendSymbol:this.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}}],d.legendItems=u)},drawLegendSymbol:function(t,e){var i,n,s,o=t.options.symbolPadding,a=r(t.options.padding,8),l=this.chart.renderer.fontMetrics(t.options.itemStyle.fontSize).h,h="horizontal"===t.options.layout;s=r(t.options.rectangleLength,200),h?(i=-(o/2),n=0):(i=-s+t.baseline-o/2,n=a+l),e.fromText=this.chart.renderer.text(e.fromLabel,n,i).attr({zIndex:2}).add(e.legendGroup),n=e.fromText.getBBox(),e.legendSymbol=this.chart.renderer.rect(h?n.x+n.width+o:n.x-l-o,n.y,h?s:l,h?l:s,2).attr({zIndex:1}).add(e.legendGroup),s=e.legendSymbol.getBBox(),e.toText=this.chart.renderer.text(e.toLabel,s.x+s.width+o,h?i:s.y+s.height-o).attr({zIndex:2}).add(e.legendGroup),i=e.toText.getBBox(),h?(t.offsetWidth=n.width+s.width+i.width+2*o+a,t.itemY=l+a):(t.offsetWidth=Math.max(n.width,i.width)+o+s.width+a,t.itemY=s.height+a,t.itemX=o)},getBox:function(){var t=-Math.pow(2,31),e=Math.pow(2,31)-1,i=-Math.pow(2,31),s=Math.pow(2,31)-1;n(this.options.data,function(n){for(var n=n.path,o=n.length,r=!1;o--;)"number"==typeof n[o]&&(r?(t=Math.max(t,n[o]),e=Math.min(e,n[o])):(i=Math.max(i,n[o]),s=Math.min(s,n[o])),r=!r)}),this.minY=s,this.maxY=i,this.minX=e,this.maxX=t},translatePath:function(t){var e=!1,n=this.xAxis,s=this.yAxis,t=[].concat(t);for(i=t.length;i--;)"number"==typeof t[i]&&(t[i]=e?Math.round(n.translate(t[i])):Math.round(s.len-s.translate(t[i])),e=!e);return t},setData:function(){t.Series.prototype.setData.apply(this,arguments),this.getBox()},translate:function(){var t=this,e=Number.MAX_VALUE,i=Number.MIN_VALUE;t.generatePoints(),n(t.data,function(n){n.shapeType="path",n.shapeArgs={d:t.translatePath(n.path)},"number"==typeof n.y&&(n.y>i?i=n.y:n.y<e&&(e=n.y))}),t.translateColors(e,i)},translateColors:function(t,e){var i=this.options,s=i.valueRanges,o=i.colorRange,r=this.colorKey;n(this.data,function(i){var n,a,l,c=i[r],d=[];if(s){for(l=s.length;l--;)if(d=s[l],n=d.from,a=d.to,(void 0===n||c>=n)&&(void 0===a||a>=c)){i.options.color=d.color;break}}else if(o&&void 0!==c){for(n=h(o.from),a=h(o.to),c=(e-c)/(e-t),l=4;l--;)d[l]=Math.round(a.rgba[l]+(n.rgba[l]-a.rgba[l])*c);i.options.color="rgba("+d.join(",")+")"}})},drawGraph:c,drawDataLabels:c,drawPoints:function(){var e,i=this.colorKey;n(this.data,function(t){t.plotY=1,null===t[i]&&(t[i]=0,t.isNull=!0)}),t.seriesTypes.column.prototype.drawPoints.apply(this),n(this.data,function(t){e=t.graphic.getBBox(),t.tooltipPos=[e.x+e.width/2,e.y+e.height/2],t.plotX=t.tooltipPos[0],t.plotY=t.tooltipPos[1],t.isNull&&(t[i]=null)}),t.Series.prototype.drawDataLabels.call(this)}}),t.Map=function(e,i){var n={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null};return seriesOptions=e.series,e.series=null,e=o({chart:{type:"map"},xAxis:n,yAxis:o(n,{reversed:!0})},e,{chart:{inverted:!1}}),e.series=seriesOptions,new t.Chart(e,i)}}(Highcharts);