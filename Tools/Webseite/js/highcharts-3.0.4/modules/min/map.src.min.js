!function(t){var e,n=t.Axis,s=t.each,o=t.extend,r=t.merge,a=t.pick,l=t.numberFormat,h=t.getOptions().plotOptions,c=t.Color,d=function(){};t.pathToArray=function(t){var e;for(t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/),e=0;e<t.length;e++)/[a-zA-Z]/.test(t[e])||(t[e]=parseFloat(t[e]));return t},t.wrap(n.prototype,"init",function(t,i,r){return"map"===i.options.chart.type&&o(this,{getSeriesExtremes:function(){var t=this.isXAxis,e=Number.MAX_VALUE,i=Number.MIN_VALUE;s(this.series,function(n){e=Math.min(e,n[t?"minX":"minY"]),i=Math.max(i,n[t?"maxX":"maxY"])}),this.dataMin=e,this.dataMax=i},setAxisTranslation:function(){var t,i,s,o=this.chart,r=o.plotWidth/o.plotHeight,a=this.isXAxis,l=o.xAxis[0];n.prototype.setAxisTranslation.call(this),a||l.transA===e||(this.transA=l.transA=Math.min(this.transA,l.transA),t=(l.max-l.min)/(this.max-this.min),s=t>r?this:l,i=(s.max-s.min)*s.transA,s.minPixelPadding=(s.len-i)/2)}}),t.call(this,i,r)}),h.map=r(h.scatter,{animation:!1,minOpacity:.2,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,tooltip:{followPointer:!0,headerFormat:'<span style="font-size:10px">{point.key}</span><br/>',pointFormat:"{series.name}: {point.y}<br/>"}}),t.seriesTypes.map=t.extendClass(t.seriesTypes.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",trackerGroups:["group","markerGroup"],getSymbol:d,getExtremesFromAll:!0,init:function(i){var n,o,r,a,h,c,d,p,u,f=this,g=i.options.legend.valueDecimals,m=[],y="horizontal"===i.options.legend.layout;t.Series.prototype.init.apply(this,arguments),c=f.options.colorRange,f.options.valueRanges?(s(f.options.valueRanges,function(i){o=i.from,r=i.to,n="",o===e?n="< ":r===e&&(n="> "),o!==e&&(n+=l(o,g)),o!==e&&r!==e&&(n+=" - "),r!==e&&(n+=l(r,g)),m.push(t.extend({chart:f.chart,name:n,options:{},drawLegendSymbol:t.seriesTypes.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},i))}),f.legendItems=m):c&&(o=c.from,r=c.to,a=c.fromLabel,h=c.toLabel,p=y?[0,0,1,0]:[0,1,0,0],y||(u=a,a=h,h=u),d={linearGradient:{x1:p[0],y1:p[1],x2:p[2],y2:p[3]},stops:[[0,o],[1,r]]},m=[{chart:f.chart,options:{},fromLabel:a,toLabel:h,color:d,drawLegendSymbol:this.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}}],f.legendItems=m)},drawLegendSymbol:function(t,e){var i,n,s,o,r,l=t.options.symbolPadding,h=a(t.options.padding,8),c=this.chart.renderer.fontMetrics(t.options.itemStyle.fontSize).h,d="horizontal"===t.options.layout,p=a(t.options.rectangleLength,200);d?(i=-(l/2),n=0):(i=-p+t.baseline-l/2,n=h+c),e.fromText=this.chart.renderer.text(e.fromLabel,n,i).attr({zIndex:2}).add(e.legendGroup),s=e.fromText.getBBox(),e.legendSymbol=this.chart.renderer.rect(d?s.x+s.width+l:s.x-c-l,s.y,d?p:c,d?c:p,2).attr({zIndex:1}).add(e.legendGroup),o=e.legendSymbol.getBBox(),e.toText=this.chart.renderer.text(e.toLabel,o.x+o.width+l,d?i:o.y+o.height-l).attr({zIndex:2}).add(e.legendGroup),r=e.toText.getBBox(),d?(t.offsetWidth=s.width+o.width+r.width+2*l+h,t.itemY=c+h):(t.offsetWidth=Math.max(s.width,r.width)+l+o.width+h,t.itemY=o.height+h,t.itemX=l)},getBox:function(){var t=this.chart,e=-Math.pow(2,31),i=Math.pow(2,31)-1,n=-Math.pow(2,31),o=Math.pow(2,31)-1;t.plotWidth,t.plotHeight,s(this.options.data,function(t){for(var s=t.path,r=s.length,a=!1;r--;)"number"==typeof s[r]&&(a?(e=Math.max(e,s[r]),i=Math.min(i,s[r])):(n=Math.max(n,s[r]),o=Math.min(o,s[r])),a=!a)}),this.minY=o,this.maxY=n,this.minX=i,this.maxX=e},translatePath:function(t){var e=this,n=(e.chart,!1),s=e.xAxis,o=e.yAxis;for(t=[].concat(t),i=t.length;i--;)"number"==typeof t[i]&&(t[i]=n?Math.round(s.translate(t[i])):Math.round(o.len-o.translate(t[i])),n=!n);return t},setData:function(){t.Series.prototype.setData.apply(this,arguments),this.getBox()},translate:function(){var t=this,e=t.options,i=Number.MAX_VALUE,n=Number.MIN_VALUE;e.minOpacity,t.generatePoints(),s(t.data,function(e){e.shapeType="path",e.shapeArgs={d:t.translatePath(e.path)},"number"==typeof e.y&&(e.y>n?n=e.y:e.y<i&&(i=e.y))}),t.translateColors(i,n)},translateColors:function(t,i){var n=this.options,o=n.valueRanges,r=n.colorRange,a=this.colorKey;s(this.data,function(n){var s,l,h,d,p,u=n[a],f=[];if(o){for(d=o.length;d--;)if(s=o[d],l=s.from,h=s.to,(l===e||u>=l)&&(h===e||h>=u)){n.options.color=s.color;break}}else if(r&&void 0!==u){for(l=c(r.from),h=c(r.to),p=(i-u)/(i-t),d=4;d--;)f[d]=Math.round(h.rgba[d]+(l.rgba[d]-h.rgba[d])*p);n.options.color="rgba("+f.join(",")+")"}})},drawGraph:d,drawDataLabels:d,drawPoints:function(){var e,i=this,n=(i.chart,i.colorKey);s(i.data,function(t){t.plotY=1,null===t[n]&&(t[n]=0,t.isNull=!0)}),t.seriesTypes.column.prototype.drawPoints.apply(i),s(i.data,function(t){e=t.graphic.getBBox(),t.tooltipPos=[e.x+e.width/2,e.y+e.height/2],t.plotX=t.tooltipPos[0],t.plotY=t.tooltipPos[1],t.isNull&&(t[n]=null)}),t.Series.prototype.drawDataLabels.call(i)}}),t.Map=function(e,i){var n={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null};return seriesOptions=e.series,e.series=null,e=r({chart:{type:"map"},xAxis:n,yAxis:r(n,{reversed:!0})},e,{chart:{inverted:!1}}),e.series=seriesOptions,new t.Chart(e,i)}}(Highcharts);