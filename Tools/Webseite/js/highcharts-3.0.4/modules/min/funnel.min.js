!function(t){var e=t.getOptions().plotOptions,i=t.seriesTypes,n=t.merge,s=function(){},o=t.each;e.funnel=n(e.pie,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),i.funnel=t.extendClass(i.pie,{type:"funnel",animate:s,translate:function(){var t,e,i,n,r,a,l,h,c,p,u,d=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this.chart,m=g.plotWidth,g=g.plotHeight,y=0,v=this.options,x=v.center,b=d(x[0],m),w=d(x[0],g),P=d(v.width,m),k=d(v.height,g),E=d(v.neckWidth,m),T=d(v.neckHeight,g),C=k-T,d=this.data,M="left"===v.dataLabels.position?1:0;this.getWidthAt=e=function(t){return t>k-T||k===T?E:E+(P-E)*((k-T-t)/(k-T))},this.getX=function(t,i){return b+(i?-1:1)*(e(t)/2+v.dataLabels.distance)},this.center=[b,w,k],this.centerX=b,o(d,function(t){f+=t.y}),o(d,function(o){u=null,n=f?o.y/f:0,a=w-k/2+y*k,c=a+n*k,t=e(a),r=b-t/2,l=r+t,t=e(c),h=b-t/2,p=h+t,a>C?(r=h=b-E/2,l=p=b+E/2):c>C&&(u=c,t=e(C),h=b-t/2,p=h+t,c=C),i=["M",r,a,"L",l,a,p,c],u&&i.push(p,u,h,u),i.push(h,c,"Z"),o.shapeType="path",o.shapeArgs={d:i},o.percentage=100*n,o.plotX=b,o.plotY=(a+(u||c))/2,o.tooltipPos=[b,o.plotY],o.slice=s,o.half=M,y+=n}),this.setTooltipPoints()},drawPoints:function(){var t=this,e=t.options,i=t.chart.renderer;o(t.data,function(n){var s=n.graphic,o=n.shapeArgs;s?s.animate(o):n.graphic=i.path(o).attr({fill:n.color,stroke:e.borderColor,"stroke-width":e.borderWidth}).add(t.group)})},drawDataLabels:function(){var t,e,n,s,o,r=this.data,a=this.options.dataLabels.distance,l=r.length;for(this.center[2]-=2*a;l--;)n=r[l],e=(t=n.half)?1:-1,o=n.plotY,s=this.getX(o,t),n.labelPos=[0,o,s+(a-5)*e,o,s+a*e,o,t?"right":"left",0];i.pie.prototype.drawDataLabels.call(this)}})}(Highcharts);