!function(t){"use strict";var e=t.getOptions(),i=e.plotOptions,n=t.seriesTypes,s=t.merge,o=function(){},r=t.each;i.funnel=s(i.pie,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),n.funnel=t.extendClass(n.pie,{type:"funnel",animate:o,translate:function(){var t,e,i,n,s,a,l,h,c,p,u,d=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this,m=g.chart,y=m.plotWidth,v=m.plotHeight,x=0,b=g.options,w=b.center,P=d(w[0],y),k=d(w[0],v),E=d(b.width,y),T=d(b.height,v),C=d(b.neckWidth,y),M=d(b.neckHeight,v),A=T-M,L=g.data,S="left"===b.dataLabels.position?1:0;g.getWidthAt=e=function(t){return t>T-M||T===M?C:C+(E-C)*((T-M-t)/(T-M))},g.getX=function(t,i){return P+(i?-1:1)*(e(t)/2+b.dataLabels.distance)},g.center=[P,k,T],g.centerX=P,r(L,function(t){f+=t.y}),r(L,function(r){u=null,n=f?r.y/f:0,a=k-T/2+x*T,c=a+n*T,t=e(a),s=P-t/2,l=s+t,t=e(c),h=P-t/2,p=h+t,a>A?(s=h=P-C/2,l=p=P+C/2):c>A&&(u=c,t=e(A),h=P-t/2,p=h+t,c=A),i=["M",s,a,"L",l,a,p,c],u&&i.push(p,u,h,u),i.push(h,c,"Z"),r.shapeType="path",r.shapeArgs={d:i},r.percentage=100*n,r.plotX=P,r.plotY=(a+(u||c))/2,r.tooltipPos=[P,r.plotY],r.slice=o,r.half=S,x+=n}),g.setTooltipPoints()},drawPoints:function(){var t=this,e=t.options,i=t.chart,n=i.renderer;r(t.data,function(i){var s=i.graphic,o=i.shapeArgs;s?s.animate(o):i.graphic=n.path(o).attr({fill:i.color,stroke:e.borderColor,"stroke-width":e.borderWidth}).add(t.group)})},drawDataLabels:function(){var t,e,i,s,o,r=this.data,a=this.options.dataLabels.distance,l=r.length;for(this.center[2]-=2*a;l--;)i=r[l],t=i.half,e=t?1:-1,o=i.plotY,s=this.getX(o,t),i.labelPos=[0,o,s+(a-5)*e,o,s+a*e,o,t?"right":"left",0];n.pie.prototype.drawDataLabels.call(this)}})}(Highcharts);